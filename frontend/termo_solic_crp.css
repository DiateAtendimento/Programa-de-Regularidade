/* ============ Base ============ */
:root{
  --txt:#1b1f23;
  --muted:#5d6670;
  --line:#e6eaf0;
  --accent:#0b4aa2;
}
*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; color:var(--txt); font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, "Helvetica Neue", sans-serif; }
@media print{
  body{ -webkit-print-color-adjust:exact; print-color-adjust:exact; }
}

/* ============ Header fixo ============ */
.prp-header{
  position: fixed; top:0; left:0; right:0; z-index: 10;
  background: #fff; border-bottom: 1px solid var(--line);
}
.logos-wrap{
  display:flex; align-items:center; justify-content:space-between;
  gap:16px; padding:10px 16px;
}
.logos-wrap img{ height:34px; }

/* Conteúdo com margem para o header */
.prp-content{ padding: 84px 24px 32px; }

/* ============ Título e metadados ============ */
.term-title{
  font-family:"Montserrat", "Inter", sans-serif;
  font-weight:700; font-size:20px; line-height:1.35; text-align:center; margin:0 0 10px;
}
.term-meta{ text-align:center; margin:0 0 6px; color:var(--muted); }

/* ============ Seções ============ */
.term-section{ margin: 10px 0 8px; }
.term-section h2{
  margin: 8px 0 8px; font-size: 15px; line-height:1.25; font-weight:700;
}
.term-section h3{
  margin: 8px 0 6px; font-size: 14px; line-height:1.25; font-weight:600;
}
.small{ font-size:12px; color:var(--muted); margin:4px 0; }
.muted{ color:var(--muted); }

/* Linhas rotuladas */
.linha{ display:flex; align-items:flex-start; gap:8px; margin:4px 0; }
.linha .rotulo{ min-width:260px; font-weight:600; }
.linha .valor{ flex:1; }

/* Grid de campos */
.grid{ display:grid; gap:8px 12px; }
.grid.grid-num{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
.grid .field{ background:#fff; padding:4px 6px; border:1px solid var(--line); border-radius:6px; }
.grid .label{ display:block; font-size:11px; color:var(--muted); margin-bottom:2px; }
.grid .value{ display:block; font-size:13px; }

/* PATCH A — garante quebra correta nos grids numéricos (evita sumir 1.3.4) */
.grid.grid-num .field{ min-width:0; overflow:visible; }
.grid.grid-num .label,
.grid.grid-num .value{ white-space:normal; text-overflow:clip; }

#sec-1-3 .grid.grid-num{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
@media (max-width: 900px){
  .grid.grid-num{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media print{
  .grid.grid-num .field{ break-inside: avoid; }
}

/* Listas padrão */
ul{ margin: 4px 0 4px 18px; padding:0; }
ul li{ margin: 0 0 2px; }

/* Seções com quebra controlada */
.avoid-break{ break-inside: avoid; }
.page-break{ break-before:auto; }

/* Força quebra antes (assinaturas) */
.break-before{ break-before: page; }

/* Assinaturas */
.term-footer{ margin-top: 18px; }
.place-date{ margin: 0 0 18px; }
.signature-block{ margin: 22px 0; }
.signature-line{ border-bottom:1px solid #000; height:0; margin: 0 0 6px; }
.signature-caption{ font-size:13px; line-height:1.25; }

/* Modal PDF */
.pdf-modal{ position:fixed; inset:0; display:none; }
.pdf-modal--open{ display:block; }
.pdf-modal__backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.35); }
.pdf-modal__box{ position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:#fff; border-radius:10px; min-width:280px; padding:16px; box-shadow:0 10px 30px rgba(0,0,0,.35); }
.pdf-modal__header{ font-weight:700; margin:0 0 8px; }
.spinner{ width:28px; height:28px; border:3px solid #ddd; border-top-color:var(--accent); border-radius:50%; animation:spin 1s linear infinite; margin-top:10px; }
@keyframes spin{ to{ transform:rotate(360deg); } }

/* Títulos de bloco extras */
.mt{ margin-top:8px; }

/* ============ Seções específicas / Fase 4.6 ============ */

/* PATCH B — força a UL 4.6.2(f) a exibir corretamente mesmo se alguma regra tentar ocultar */
#f462f-criterios{ display:block !important; margin: 0 0 4px 18px; padding:0; }
#f462f-criterios li{ display:list-item; margin:0 0 2px; }

@media print{
  #fase-46, #fase-46 * { visibility: inherit; }
  #f462f-criterios{ break-inside: avoid; }
  #f46-decls, #f46-criterios, #f46-finalidades{ break-inside: avoid; }
  #f466-docs, #f466-exec{ break-inside: avoid; }
}

/* Patch visual para caixas de docs/exec em 4.4/4.6 */
#f446-docs ul, #f446-exec ul,
#f46-anexos ul, #f46-decls, #f46-criterios, #f46-finalidades{ margin-left:18px; }

/* Header no PDF: só na primeira página (Puppeteer) */
@page{ size: A4; margin: 22mm 16mm 20mm 16mm; }
@media print{
  .prp-header{ position: fixed; top:-9999px; } /* removido do fluxo do PDF; header real vem do template do Puppeteer */
}

/* Pequenos detalhes */
.term-section .label strong{ font-weight:700; }
.term-section .label{ font-weight:600; }
