<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<title>Launcher de Teste - termo_solic_crp.html</title>
<style>body{font-family:system-ui,Segoe UI,Arial;margin:24px;line-height:1.35} input,button,textarea{font-size:16px;padding:6px 10px}</style>
</head>
<body>
<h1>Launcher de Teste</h1>
<p>Este teste abre <code>termo_solic_crp.html</code> passando 100% dos campos por <em>querystring</em> no formato esperado por <code>termo.js</code>. Se algum campo não renderizar, o problema está no mapeamento de chaves.</p>
<button id="abrir">Abrir termo_solic_crp.html com dados fake</button>
<script>
function dd(n){return String(n).padStart(2,'0')}
function hojeBR(){const d=new Date();return dd(d.getDate())+'/'+dd(d.getMonth()+1)+'/'+d.getFullYear()}

document.getElementById('abrir').onclick = () => {
  const params = new URLSearchParams({
    uf: 'CE',
    ente: 'Município de Milagres',
    cnpj_ente: '12.345.678/0001-99',
    email_ente: 'contato@milagres.ce.gov.br',
    ug: 'IPREM',
    cnpj_ug: '11.222.333/0001-44',
    email_ug: 'rp@iprem.milagres.ce.gov.br',

    nome_rep_ente: 'Pref. Fulano de Tal',
    cpf_rep_ente: '123.456.789-01',
    cargo_rep_ente: 'Prefeito',
    email_rep_ente: 'prefeito@milagres.ce.gov.br',

    nome_rep_ug: 'Beltrano Sicrana',
    cpf_rep_ug: '987.654.321-00',
    cargo_rep_ug: 'Presidente',
    email_rep_ug: 'presidente@iprem.milagres.ce.gov.br',

    tipo_emissao_ult_crp: 'ORDINÁRIO',
    venc_ult_crp: hojeBR(),

    esfera_cod: 'M', // M/E/D para municipal/estadual/distrital
    data_termo: hojeBR(),

    compromisso: 'Regularizar os itens assinalados na adesão, com atualização quinzenal.',
    providencias: 'Ajuste do DIPR; DPIN; MSC; adequar nomeações.',
    condicao_vigencia: 'Enquanto o CADPREV não refletir as regularizações.'
  });

  // Multi-valor para critérios (exercita q.getAll("criterio"))
  ['DIPR – Encaminhamento', 'MSC', 'DAIR – Encaminhamento'].forEach(v => params.append('criterio', v));

  // Critérios selecionados por código (não obrigatório, mas suportado)
  params.set('codes', '8,11,10');

  // Prazo adicional flag (se houver tratamento no template)
  params.set('prazo_adicional_flag','SIM');

  // Abre em nova aba
  const url = 'termo_solic_crp.html?' + params.toString();
  window.open(url, '_blank');
};
</script>
</body>
</html>
